<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Релизы и деплои - Об DevOps и архитектуру</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta itemprop=name content="Релизы и деплои"><meta itemprop=description content="Периодически поднимается тема того, чем отличается deploy от release, и на это есть элегантный ответ в недавно вышедшей новой версии стандарта IT4IT от The Open Group.
Deploy &ndash; это собственно инсталляция новой версии продукта на продакшн (сюда же включают и удаление старых версий с продакшна). В этот процесс входят и все стратегии деплоя &ndash; в том числе canary deploy, раскатка на какую-то небольшую часть аудитории, или деплой функциональности вообще прикрытой через feature flags и недоступной никому."><meta itemprop=datePublished content="2022-12-12T09:54:04+03:00"><meta itemprop=dateModified content="2022-12-12T09:54:04+03:00"><meta itemprop=wordCount content="594"><meta itemprop=keywords content><meta property="og:title" content="Релизы и деплои"><meta property="og:description" content="Периодически поднимается тема того, чем отличается deploy от release, и на это есть элегантный ответ в недавно вышедшей новой версии стандарта IT4IT от The Open Group.
Deploy &ndash; это собственно инсталляция новой версии продукта на продакшн (сюда же включают и удаление старых версий с продакшна). В этот процесс входят и все стратегии деплоя &ndash; в том числе canary deploy, раскатка на какую-то небольшую часть аудитории, или деплой функциональности вообще прикрытой через feature flags и недоступной никому."><meta property="og:type" content="article"><meta property="og:url" content="https://timurb.ru/kb/release-deploy/"><meta property="article:section" content="kb"><meta property="article:published_time" content="2022-12-12T09:54:04+03:00"><meta property="article:modified_time" content="2022-12-12T09:54:04+03:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Релизы и деплои"><meta name=twitter:description content="Периодически поднимается тема того, чем отличается deploy от release, и на это есть элегантный ответ в недавно вышедшей новой версии стандарта IT4IT от The Open Group.
Deploy &ndash; это собственно инсталляция новой версии продукта на продакшн (сюда же включают и удаление старых версий с продакшна). В этот процесс входят и все стратегии деплоя &ndash; в том числе canary deploy, раскатка на какую-то небольшую часть аудитории, или деплой функциональности вообще прикрытой через feature flags и недоступной никому."><link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel=stylesheet type=text/css><link rel=stylesheet type=text/css media=screen href=https://timurb.ru/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://timurb.ru/css/main.css><link rel=stylesheet type=text/css href=https://timurb.ru/css/custom.css><link id=dark-scheme rel=stylesheet type=text/css href=https://timurb.ru/css/dark.css><script src=https://timurb.ru/js/main.js></script></head><body><div class="container wrapper"><div class=header><h1 class=site-title><a href=https://timurb.ru/>Об DevOps и архитектуру</a></h1><div class=site-description><nav class="nav social"><ul class=flat></ul></nav></div><nav class=nav><ul class=flat><li><a href=../../about>Об авторе</a></li><li><a href=../../kb>Оглавление</a></li></ul></nav></div><div class=post><div class=post-header><div class=matter><h1 class=title>Релизы и деплои</h1></div></div><div class=meta><div class=date><small>Последнее обновление: 12 Dec 2022</small></div></div><div class=markdown><p>Периодически поднимается тема того, чем отличается deploy от release, и на это есть элегантный ответ в недавно вышедшей <a href=https://pubs.opengroup.org/it4it/3.0/standard/_book-html.html>новой версии</a> стандарта <a href=https://pubs.opengroup.org/it4it/>IT4IT</a> от <a href=https://www.opengroup.org/>The Open Group</a>.</p><ul><li><p><a href=https://pubs.opengroup.org/it4it/3.0/standard/VSs_IT4IT-Value-Streams.html#VS_Deploy>Deploy</a> &ndash; это собственно инсталляция новой версии продукта на продакшн (сюда же включают и удаление старых версий с продакшна). В этот процесс входят и все стратегии деплоя &ndash; в том числе canary deploy, раскатка на какую-то небольшую часть аудитории, или деплой функциональности вообще прикрытой через feature flags и недоступной никому.</p></li><li><p><a href=https://pubs.opengroup.org/it4it/3.0/standard/VSs_IT4IT-Value-Streams.html#VS_Release>Release</a> &ndash; это предоставление новой версии <em>сервиса</em> (или услуги, если вспомнить ITIL) потребителям.
При этом всякие хотфиксы в релиз закономерно не войдут, да и кажется далеко не каждый мажорный релиз по такой классификации можно будет назвать релизом. Но релизом станет, например, изменение SLA сервиса при неизменной функциональности или изменение стоимости подписки на него. Еще один пример релиза &ndash; в софте не меняется вообще ничего, меняются только гарантии на LTS поддержку (см Terraform 1.0 который от 0.15 отличается только гарантиями долговременной поддержки).
А еще точнее, получается что релиз всегда привязан к сегменту потребителей, и это во многом маркетинговая штука. Рефакторинг софта, который ничего для пользователя не меняет, но даёт возможность писать фичи быстрее — это релиз для разработчиков, но не релиз для пользователей. Для первых релиз есть, для вторых его нет, хотя софт один и тот же.</p></li></ul><p>Что это значит для нас?</p><ul><li>В первую очередь в том, призыв &ldquo;релизиться чаще&rdquo; должен вызывать ответный вопрос &ldquo;для каких пользователей?&rdquo; (естественно, сегменты пользователей для своих цифровых продуктов нужно выявить сразу же как только мы с начинаем работать со своим продуктом). И мы тут же понимаем, что с одной стороны нельзя всем угодить, а с другой стороны есть пользователи разного приоритета и важности , и пауза в релизах на подготовку к единственному долгому и важному релизу может оказаться для нас важнее, чем выпуск серии релизов низкой важности.</li><li>На мой взгляд нельзя релизиться чаще чем раз в месяц, потому что каждый релиз это стресс для пользователя. И уж точно не стоит планировать релизиться каждый день. Как часто вы предпочитаете обновлять операционную систему на своем компьютере или в своем телефоне? Если же вы успешно <em>релизитесь</em> чаще (вспоминаем отличия релиза от деплоя), значит постоянная эволюция и развитие вашего сервиса &ndash; часть вашего сервисного предложения и вероятно является вашим конкурентным преимуществом (и тогда важно &ldquo;частоту релизов&rdquo; отслеживать именно для отслеживания состояния этого самого конкурентного преимущества, а не потому что DORA предсказала). И не важно идет ли речь про SaaS или про устанавливаемый софт &ndash; вспомните каким релизом вашего броузера вы пользуетесь. Если же постоянное непрерывное и быстрое развитие продукта для вас таким конкурентным преимуществом по той или иной причине не является (например, у вас другая стратегия), поддерживать актуальным в течение длительного времени сервисное предложение &ldquo;наш продукт постоянно значимо и заметно развивается и улучшается&rdquo; скорее всего окажется слишком дорого.</li><li>Частота <em>деплоев</em> не важна вообще. Для оценки качества работы CI/CD может оказаться важна частота запуска пайплайнов (и в этом случае деплой входит в пайплайн, и будет одним из результатов его выполнения), для кросс-командной работы &ndash; частота <em>релизов</em> для внутренних пользователей (разработчиков). А что дает частота деплоев сама по себе? Ну разве что ее можно померять для определения предельно допустимых нагрузок на инструмент деплоя.</li></ul><p>DORA выбрали частоту деплоев в качестве метрики лишь по той причине, что это единственный подходящий показатель, который можно более-менее убедительно измерить через опросник рассылаемый веером по интернету (с частотой релизов и частотой запуска пайплайнов это сложнее), и они явно про это говорили в книге Accelerate.</p><p>В сообществе регулярно ставят под сомнение пользу измерения частоты деплоев (<a href=https://dev.to/kmruiz/four-key-metrics-and-team-performance-2p4f>вот пример</a>, если у вас есть другие &ndash; смело присылайте).</p><p>Но тем не менее все прикладывают усилия чтобы &ldquo;релизиться чаще&rdquo;.</p><p>Почему?</p></div><div class=tags></div><script src=https://utteranc.es/client.js repo=timurb/timurb.github.io issue-term=pathname label=comment theme=preferred-color-scheme crossorigin=anonymous async></script></div></div><div class="footer wrapper"><nav class=nav><div>2023 <a href=https://github.com/knadh/hugo-ink>Ink</a> theme on <a href=https://gohugo.io>Hugo</a></div></nav></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-XHRMHV11BE"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XHRMHV11BE",{anonymize_ip:!1})}</script></body></html>