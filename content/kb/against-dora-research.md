---
title: "Против исследования DORA"
date: 2022-01-01T12:15:28+03:00
draft: true
---

Уже больше 5 лет [DORA](https://www.devops-research.com/research.html) проводит исследование State Of DevOps, 
в котором изучает какие составляющие процессов разработки, поставки и тестирования влияет на производительность команд разработки.
Ежегодно они публикуют отчеты о своих исследованиях, по указанной выше ссылке, а также опубликовали [книгу Accelerate](https://itrevolution.com/accelerate-book/),
в которой опубликовали подробную методику измерений. [Наша компания](https://express42.com/) уже третий год (с 2020г) проводит аналогичное
исследование для русскоязычного сообщества -- [Состояние DevOps в России](https://e42.link/State_of_DevOps2021).

По результатам исследований получилась совершенно замечательная [DevOps Capabilities Model](https://cloud.google.com/architecture/devops/capabilities),
которой можно пользоваться для постановки Devops-практик у себя в организации.

Однако в целом у меня вызывает очень большие вопросы то, как обычно трактуются эти результаты.
Все нижеприведенное -- мое личное мнение и скорее всего не совпадает как мнением работодатели, так и сообщества.
Буду очень рад если на него также можно будет посмотреть с разных сторон.

Самые главные моменты, которые действительно ценны:
- Кластеризация результатов как сегментация компаний (сегменты High Performer, Medium Performer, Low Performer как "архетипы" организации, термин "архетип" мой)
- Демонстрация возможного одновременного достжения высокой скорости поставки и качества результата (до этого считалось, что они взаимоисключающие)
- Выделение для разных сегментов компаний диаметрально разных профилей показателей потока (https://timurb.ru/kb/4-dora-metrics/)

Но в целом трактовка модели (если не исследователями, то широкой публикой, в том числе ближайшими коллегами исследователей) вызывает большие сомнения:

1. Если компания относится к одному сегменту ("архетипу"), то **постановки devops-практик недостаточно, чтобы изменить сам архетип** (т.е. чтобы перейти из Medium Performer в High Performer) -- должна изменяться архитектура самой организации: модели бизнес-планирования, запуска проектов, их финансирования и в конечном итоге вся организация целиком.

2. **Модель показывает связи между практиками, но этого недостаточно, чтобы из этого делать какие-то выводы.** Вся модель строится по принципу "некоторые практики предсказывают некоторые исходы". К примеру, "Continuous Integration предсказывает Высокую частоту поставки".
Если неосторожно пользоваться техническим термином "предсказывает" можно посчитать, что достаточно реализовать у себя Continuous Integration и частота поставки
возрастет сама собой магическим способом. На деле же в исследовании говорится о "inferential prediction". Или иными словами, о предсказаниях **в наблюдениях**:
если мы видим где-то реализованный Continuos Integration, то с высокой вероятностью там же будет высокая частота поставки, но **никаких других выводов сделать нельзя**. Я скорее предположу обратное -- там где *требуется* высокая частота поставки будет реализован Continuous Integration, но сам по себе его наличие никак эту частоту поставки не увеличит.
Авторы исследования написали в книге Accelerate целый раздел про это, но кажется его никто не понял и я вижу как эту же ошибку совершают многие как в русскоязычном, так и в англоязычном сообществах.

3. **Некачественные данные на входе не дают возможность делать численных выводов для любого конкретного случая.** Модель строится на основании опросников, на которые отвечают люди из интернета. Этого безусловно достаточно для того, чтобы строить кластеризацию и делать выводы о взаимосвязи практик (т.к. методика построения взаимосвязей описана в книге Accelerate, и кажется она достаточно строгая), но не дает возможности делать оценки для любого другого случая и сравнивать их с результатами исследования. К примеру, если мы попытаемся сопоставить числа из JIRA конкретной компании с числами, которые называют люди мы будем удивлены тем, что они будут различаться в несколько раз: чаще всего нас интересует перцентиль в районе p75-p95 (т.е. некоторые гарантии), а люди в ответах называют даже не среднее или медиану, а [моду](https://ru.wikipedia.org/wiki/%D0%9C%D0%BE%D0%B4%D0%B0_(%D1%81%D1%82%D0%B0%D1%82%D0%B8%D1%81%D1%82%D0%B8%D0%BA%D0%B0)). Для распределений с длинным хвостом мода обычно находится ниже медианы, т.е. встречается *менее чем в половине случаев*, а перцентиль p75-p95 же обычно в 2-3 раза выше ее. По этой же причине, например существует практика менеджеров умножать оценки разработчиков на 3: разработчики в качестве оценки называют моду, а менеджеров интересует четвертая квартиль.
Все это означает, что числа которые используются внутри исследования как-то можно сопоставлять только с числами полученных из других опросников, но скорее всего нельзя сопоставлять с числами полученными из JIRA и прочих трекеров.

4. **Частота поставки не всегда означает пользу.** Оптимизация по потоку безусловно важна, но оптимизация одного небольшого участка потока не обязательно дает выигрыш на всем потоке целиком. Пользу для бизнеса и для пользователей несут поставки, которые видны им -- фичи, багфиксы и т.п. Именно их поток и влияет на пользовательский опыт и бизнес-гибкость с бизнес-результатами. Частота и скорость поставки более мелких задач могут ускорить поставку бизнес-фич значительно, но могут и практически их не ускорить, и это будет зависеть в большей степени от организации потока бизнес-фич, а уже только вслед за этим от потока технических задач. Иными словами, при всей замечательности DevOps Capabilities Model она не является серебряной пулей.

    На что действительно указывает частота поставки, это на средний размер поставляемого инкремента. На что это влияет, так на возможность организации адаптировать выпускаемый продукт к окружающим условиям. Чтобы от этого была польза опять же необходимо чтобы это было встроено в организацию на более высоком уровне.

5. **Применение практик devops не обязательно принесет пользу бизнесу.** Capabilities Model (модель возможностей команд или их способностей) означает, что команда может поставить некоторыe результаты с определенной частотой и в определенные сроки. Проблема в том, что для того, чтобы эти возможности использовались на них должен быть спрос со стороны непосредственного заказчика. Иными словами, заказчик должен **уметь пользоваться** возможностью быстрой и частой поставки результата своими командами. Сама организация должна быть устроена таким образом, чтобы эти способности приносили пользу бизнесу, должен быть запрос на них в том или ином виде.

Моя позиция заключается в том, что если есть некоторый запрос от организации на некоторые командные возможности, то весь процесс поставки проектируется исходя из этих потребностей. Без такого запроса польза будет минимальная если соотнести ее с затратами на реализацию этих практик.
Примеры запросов:
- Необходима возможность разворачивания инкремента на продакшне в течение 10 минут после окончания тестирования -> приводит к Deployment Automation
- Необходима возможность выделить артефакт для дальнейшего тестирования в течение 5 минут после окончания разработки -> приводит к Trunk Based Development и Build Pipelines.

Но написание скриптов автоматизации вовсе не обязательно приведет к деплою в течение 10 минут после окончания тестирования, также как и trunk based development не приводит к выделению артефактов -- более того, я знаю организации работающие по gitflow/github flow (т.е. разновидностью trunk based development), но которые пересобирают артефакты перед тестированием и перед деплоем на продакшн (что конечно является антипаттерном), т.е. заявляемая цепочка не выполняется.

Иными словами, выводы следующие:
- Для *практического* использования модель практик гораздо проще строить не через статистический анализ, а через инженерию требований и архитектурные практики. Одновременно с этим результат будет более реалистичным и подходящим для организации чем простое применение лучших практик -- чаще всего интересует не отличный результат через несколько лет, а приемлемый результат завтра и постепенное его улучшение.
- Переход между архетипами требует изменения *архитектуры всей организации*, а не реализации некоторых практик. Также он может оказаться оправданным (как с т.з. экономики, так и с т.з. других критериев), а может и нет -- это не обсуждается в исследованиях, да это и невозможно там обсудить.
- Devops-практики хороши, но не сами по себе, а как способ реализации некоторых запросов.
