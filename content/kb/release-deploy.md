---
title: "Релизы и деплои"
date: 2022-12-12T09:54:04+03:00
---

Периодически поднимается тема того, чем отличается deploy от release, и на это есть элегантный ответ в недавно вышедшей [новой версии](https://pubs.opengroup.org/it4it/3.0/standard/_book-html.html) стандарта [IT4IT](https://pubs.opengroup.org/it4it/) от [The Open Group](https://www.opengroup.org/).

- [Deploy](https://pubs.opengroup.org/it4it/3.0/standard/VSs_IT4IT-Value-Streams.html#VS_Deploy) -- это собственно инсталляция новой версии продукта на продакшн (сюда же включают и удаление старых версий с продакшна). В этот процесс входят и все стратегии деплоя -- в том числе canary deploy, раскатка на какую-то небольшую часть аудитории, или деплой функциональности вообще прикрытой через feature flags и недоступной никому.

- [Release](https://pubs.opengroup.org/it4it/3.0/standard/VSs_IT4IT-Value-Streams.html#VS_Release) -- это предоставление новой версии _сервиса_ (или услуги, если вспомнить ITIL) потребителям.
При этом всякие хотфиксы в релиз закономерно не войдут, да и кажется далеко не каждый мажорный релиз по такой классификации можно будет назвать релизом. Но релизом станет, например, изменение SLA сервиса при неизменной функциональности. Также релизом станет, например, изменение стоимости подписки на него. Еще один вариант релиза -- в софте не меняется вообще ничего, меняются только гарантии на LTS поддержку (см Terraform 1.0 который от 0.15 отличается только гарантиями долговременной поддержки).
А еще точнее, получается что релиз всегда привязан к сегменту потребителей, и это во многом маркетинговая штука. Рефакторинг софта, который ничего для пользователя не меняет, но даёт возможность писать фичи быстрее — это релиз для разработчиков, но не релиз для пользователей. Для первых релиз есть, для вторых его нет, хотя софт один и тот же.

Что это значит для нас?

- В первую очередь в том, призыв "релизиться чаще" должен вызывать ответный вопрос "для каких пользователей?" (естественно, сегменты пользователей для своих цифровых продуктов нужно выявить сразу же как только мы с начинаем работать со своим продуктом). И мы тут же понимаем, что с одной стороны нельзя всем угодить, а с другой стороны есть пользователи разного приоритета и важности (это разные характеристики), и пауза в релизах на подготовку к единственному долгому и важному релизу может оказаться для нас важнее, чем выпуск серии релизов низкой важности.
- Нельзя релизиться чаще чем раз в месяц. Лучше -- раз в полгода или еще реже. И уж точно не стоит планировать релизиться каждый день, потому что каждый релиз это стресс для пользователя. Как часто вы предпочитаете обновлять операционную систему на своем компьютере или в своем телефоне? Если же вы успешно _релизитесь_ чаще (вспоминаем отличия релиза от деплоя), значит постоянная эволюция и развитие вашего сервиса -- часть вашего сервисного предложения и вероятно является вашим конкурентным преимуществом (и тогда важно "частоту релизов" отслеживать именно для отслеживания состояния этого самого конкурентного преимущества, а не потому что DORA предсказала). И не важно идет ли речь про SaaS или про устанавливаемый софт -- вспомните каким релизом вашего броузера вы пользуетесь. Если же постоянное непрерывное и быстрое развитие продукта для вас таким конкурентным преимуществом по той или иной причине не является (например, у вас другая стратегия), поддерживать в течение длительного времени сервисное предложение "наш продукт постоянно значимо и заметно развивается и улучшается" скорее всего окажется слишком дорого.
- Частота _деплоев_ не важна вообще. Для оценки качества работы CI/CD может оказаться важна частота запуска пайплайнов (и в этом случае деплой входит в пайплайн), для кросс-командной работы -- частота _релизов_ для внутренних пользователей (разработчиков). А что дает частота деплоев сама по себе? Ну разве что для ее можно померять для определения предельно допустимых нагрузок на инструмент деплоя.

DORA выбрали частоту деплоев для измерения лишь по той причине, что это единственный подходящий показатель, который можно более-менее убедительно измерить через опросник рассылаемый веером по интернету (с частотой релизов и частотой запуска пайплайнов это сложнее), и они явно про это говорили в книге Accelerate.

В сообществе регулярно ставят под сомнение пользу измерения частоты деплоев ([вот пример](https://dev.to/kmruiz/four-key-metrics-and-team-performance-2p4f), если у вас есть другие -- смело присылайте), но тем не менее все прикладывают усилия чтобы "релизиться чаще".

Почему?
